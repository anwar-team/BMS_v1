# ุฃุฏุงุฉ ุชุญููู ูููุงุช BOK - ุงูููุชุจุฉ ุงูุดุงููุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุฃุฏุงุฉ ูููุฉ ููุชูุงููุฉ ูุชุญููู ูููุงุช `.bok` ูู ุงูููุชุจุฉ ุงูุดุงููุฉ ุฅูู ูุธุงู ุฅุฏุงุฑุฉ ุงููุชุจ (BMS). ุชุฏุนู ุงูุฃุฏุงุฉ ุงูุชุญููู ุงูุชููุงุฆู ูุน ุงูุญูุงุธ ุนูู ูููู ุงููุชุงุจ ูุงููุตูุต ุงูุนุฑุจูุฉ.

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ุงูุชุญููู ุงูุชููุงุฆู
- ุชุญููู ุชููุงุฆู ููููู ูููุงุช `.bok`
- ุงุณุชุฎุฑุงุฌ ูุนูููุงุช ุงููุชุงุจ ูุงููุคูู
- ุชุญููู ุงููุตูู ูุงูุฃุฌุฒุงุก ูุงูุตูุญุงุช
- ุฏุนู ุงููุตูุต ุงูุนุฑุจูุฉ ุจุงููุงูู

### ๐ฏ ูุงุฌูุฉ ูุณุชุฎุฏู ูุชูุฏูุฉ
- ูุงุฌูุฉ Filament ุณููุฉ ุงูุงุณุชุฎุฏุงู
- ูุนุงููุฉ ุงูุจูุงูุงุช ูุจู ุงูุชุญููู
- ุชุชุจุน ุชูุฏู ุงูุนูููุฉ
- ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุชุจ ุงููุญููุฉ

### โก ุฃุฏุงุก ุนุงูู
- ูุนุงูุฌุฉ ูุชูุงุฒูุฉ ูููููุงุช
- ุชุญุณูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ
- ุฏุนู ุงููููุงุช ุงููุจูุฑุฉ
- ูุธุงู ุชุฎุฒูู ูุคูุช ุฐูู

### ๐ง ูุฑููุฉ ูู ุงูุชูููู
- ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต
- ุฏุนู ุฃูุงูุฑ ุณุทุฑ ุงูุฃูุงูุฑ
- ูุธุงู ุณุฌูุงุช ููุตู
- ุฅุนุฏุงุฏุงุช ุฃูุงู ูุชูุฏูุฉ

## ูุชุทูุจุงุช ุงููุธุงู

### ุงูุจุฑูุฌูุงุช ุงููุทููุจุฉ
- PHP 8.1 ุฃู ุฃุญุฏุซ
- Laravel 10.x
- Filament 3.x
- mdb-tools (ููุฑุงุกุฉ ูููุงุช Access)

### ูุชุทูุจุงุช ุงููุธุงู
```bash
# Ubuntu/Debian
sudo apt-get install mdb-tools

# CentOS/RHEL
sudo yum install mdb-tools

# macOS
brew install mdb-tools

# Windows (WSL)
sudo apt-get install mdb-tools
```

## ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูุญุฒู ุงููุทููุจุฉ

```bash
# ุฅุถุงูุฉ ููุชุจุฉ mdb-parser ุฅูู composer.json
composer require mdb-tools/mdb-parser
```

### 2. ุชุณุฌูู ูุฒูุฏ ุงูุฎุฏูุฉ

ุฃุถู ุฅูู `config/app.php`:

```php
'providers' => [
    // ...
    App\Providers\BokConverterServiceProvider::class,
],
```

### 3. ูุดุฑ ูููุงุช ุงูุชูููู

```bash
php artisan vendor:publish --tag=bok-converter-config
```

### 4. ุชูููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุฃุถู ุฅูู `.env`:

```env
# ูุณุงุฑ ุฃุฏูุงุช MDB
MDB_TOOLS_PATH=mdb-tools

# ูุฌูุฏ ุงูุชุญููู ุงููุคูุช
BOK_TEMP_DIR=storage/app/temp/bok_conversion

# ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูููู (ุจุงูุจุงูุช)
BOK_MAX_FILE_SIZE=104857600

# ุชูุนูู ุงูุณุฌูุงุช ุงูููุตูุฉ
BOK_DETAILED_LOGGING=false

# ุฅูุดุงุก ูุณุฎ ุงุญุชูุงุทูุฉ
BOK_CREATE_BACKUP=false
```

### 5. ุฅูุดุงุก ุงููุฌูุฏุงุช ุงููุทููุจุฉ

```bash
php artisan storage:link
mkdir -p storage/app/temp/bok_conversion
mkdir -p storage/app/bok-imports
mkdir -p storage/app/backups/bok
```

## ุทุฑู ุงูุงุณุชุฎุฏุงู

### 1. ูุงุฌูุฉ ุงูููุจ (Filament)

#### ุงููุตูู ููุฃุฏุงุฉ
1. ุงูุชูู ุฅูู ููุญุฉ ุชุญูู Filament
2. ุงุฎุชุฑ "ุงุณุชูุฑุงุฏ ูููุงุช BOK" ูู ุงููุงุฆูุฉ
3. ุงููุฑ ุนูู "ุงุณุชูุฑุงุฏ ููู BOK ุฌุฏูุฏ"

#### ุฎุทูุงุช ุงูุชุญููู
1. **ุฑูุน ุงูููู**: ุงุฎุชุฑ ููู `.bok` ูู ุฌูุงุฒู
2. **ูุนุงููุฉ ุงูุจูุงูุงุช**: ุฑุงุฌุน ุงููุนูููุงุช ุงููุณุชุฎุฑุฌุฉ
3. **ุฎูุงุฑุงุช ุงูุชุญููู**: ุงุฎุชุฑ ุงูุฅุนุฏุงุฏุงุช ุงูููุงุณุจุฉ
4. **ุงูุชุญููู**: ุงุจุฏุฃ ุนูููุฉ ุงูุชุญููู

### 2. ุณุทุฑ ุงูุฃูุงูุฑ (CLI)

#### ุชุญููู ููู ูุงุญุฏ
```bash
php artisan bok:convert /path/to/book.bok
```

#### ุชุญููู ูุชุนุฏุฏ
```bash
php artisan bok:convert /path/to/directory --batch
```

#### ุฎูุงุฑุงุช ูุชูุฏูุฉ
```bash
# ุชุญููู ูุน ุชูุธูู ุงููุตูุต
php artisan bok:convert book.bok --clean

# ุชุญููู ุจุญุงูุฉ ูุณูุฏุฉ
php artisan bok:convert book.bok --status=draft

# ุนุฑุถ ุชูุงุตูู ุฅุถุงููุฉ
php artisan bok:convert book.bok --verbose

# ุชุนุทูู ุงููุดู ุงูุชููุงุฆู ุนู ุงููููู
php artisan bok:convert book.bok --no-structure
```

### 3. ุงูุงุณุชุฎุฏุงู ุงูุจุฑูุฌู

```php
use App\Services\BokConverterService;

$converter = new BokConverterService();
$result = $converter->convertBokFile('/path/to/book.bok');

if ($result['success']) {
    echo "ุชู ุชุญููู ุงููุชุงุจ: " . $result['title'];
    echo "ูุนุฑู ุงููุชุงุจ: " . $result['book_id'];
} else {
    echo "ุฎุทุฃ: " . $result['error'];
}
```

## ูููู ุงูุจูุงูุงุช ุงููุญููุฉ

### ูููุฐุฌ ุงููุชุงุจ (Book)
```php
[
    'title' => 'ุนููุงู ุงููุชุงุจ',
    'description' => 'ูุตู ุงููุชุงุจ',
    'language' => 'ar',
    'status' => 'published'
]
```

### ูููุฐุฌ ุงูุฌุฒุก (Volume)
```php
[
    'book_id' => 1,
    'number' => 1,
    'title' => 'ุงูุฌุฒุก ุงูุฃูู',
    'page_start' => 1,
    'page_end' => 100
]
```

### ูููุฐุฌ ุงููุตู (Chapter)
```php
[
    'book_id' => 1,
    'volume_id' => 1,
    'chapter_number' => 1,
    'title' => 'ุงููุตู ุงูุฃูู',
    'page_start' => 1,
    'page_end' => 20
]
```

### ูููุฐุฌ ุงูุตูุญุฉ (Page)
```php
[
    'book_id' => 1,
    'volume_id' => 1,
    'chapter_id' => 1,
    'page_number' => 1,
    'content' => 'ูุญุชูู ุงูุตูุญุฉ...'
]
```

## ุฅุนุฏุงุฏุงุช ุงูุชูููู

### ููู `config/bok_converter.php`

```php
return [
    // ูุณุงุฑ ุฃุฏูุงุช MDB
    'mdb_tools_path' => env('MDB_TOOLS_PATH', 'mdb-tools'),
    
    // ุฅุนุฏุงุฏุงุช ุงูุฃุฏุงุก
    'performance' => [
        'batch_size' => 100,
        'memory_limit' => '512M',
        'max_execution_time' => 300,
    ],
    
    // ุฅุนุฏุงุฏุงุช ุชูุธูู ุงููุตูุต
    'text_cleaning' => [
        'remove_control_chars' => true,
        'normalize_whitespace' => true,
        'fix_arabic_encoding' => true,
    ],
    
    // ูุคุดุฑุงุช ุจุฏุงูุฉ ุงููุตูู
    'chapter_indicators' => [
        'ุงููุตู', 'ุงูุจุงุจ', 'ุงููุจุญุซ', 'ุงููุณู'
    ],
];
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### 1. ุฎุทุฃ "mdb-tools not found"
```bash
# ุชุซุจูุช mdb-tools
sudo apt-get install mdb-tools

# ุฃู ุชุญุฏูุฏ ุงููุณุงุฑ ูู .env
MDB_TOOLS_PATH=/usr/bin/mdb-tools
```

#### 2. ุฎุทุฃ ูู ุชุฑููุฒ ุงููุตูุต ุงูุนุฑุจูุฉ
```php
// ูู config/bok_converter.php
'text_cleaning' => [
    'fix_arabic_encoding' => true,
]
```

#### 3. ููุงุฏ ุงูุฐุงูุฑุฉ
```php
// ุฒูุงุฏุฉ ุญุฏ ุงูุฐุงูุฑุฉ
'performance' => [
    'memory_limit' => '1G',
    'batch_size' => 50,
]
```

#### 4. ุงูุชูุงุก ููุช ุงูุชูููุฐ
```php
// ุฒูุงุฏุฉ ููุช ุงูุชูููุฐ
'performance' => [
    'max_execution_time' => 600, // 10 ุฏูุงุฆู
]
```

### ุชูุนูู ุงูุณุฌูุงุช ุงูููุตูุฉ

```env
BOK_DETAILED_LOGGING=true
```

```bash
# ุนุฑุถ ุงูุณุฌูุงุช
tail -f storage/logs/bok_converter.log
```

## ุงูุฃูุงู ูุงูุฃุฏุงุก

### ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
- ุงูุชุญูู ูู ููุน ุงูููู ูุจู ุงููุนุงูุฌุฉ
- ุชุญุฏูุฏ ุญุฏ ุฃูุตู ูุญุฌู ุงูููู
- ุชูุธูู ุงููุฏุฎูุงุช ูุชุนููู ุงูุจูุงูุงุช
- ุงุณุชุฎุฏุงู ุงููุนุงููุงุช ูุถูุงู ุณูุงูุฉ ุงูุจูุงูุงุช

### ุชุญุณูู ุงูุฃุฏุงุก
- ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุนูู ุฏูุนุงุช
- ุงุณุชุฎุฏุงู ุงูููุฑุณุฉ ูุชุณุฑูุน ุงูุจุญุซ
- ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ ุชููุงุฆูุงู
- ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุชุทููุฑ ูุงููุณุงููุฉ

### ูููู ุงููููุงุช
```
app/
โโโ Services/
โ   โโโ BokConverterService.php
โโโ Filament/Resources/
โ   โโโ BokImportResource.php
โโโ Console/Commands/
โ   โโโ ConvertBokCommand.php
โโโ Providers/
    โโโ BokConverterServiceProvider.php

config/
โโโ bok_converter.php
```

### ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ
1. ุฅูุดุงุก ูุฑุน ุฌุฏูุฏ ูู `main`
2. ุชุทููุฑ ุงูููุฒุฉ ูุน ุงูุงุฎุชุจุงุฑุงุช
3. ุชุญุฏูุซ ุงูุชูุซูู
4. ุฅุฑุณุงู Pull Request

### ุงุฎุชุจุงุฑ ุงูุฃุฏุงุฉ
```bash
# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
php artisan test --filter=BokConverter

# ุงุฎุชุจุงุฑ ููู ูุนูู
php artisan bok:convert tests/fixtures/sample.bok --verbose
```

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ
- ูุฑุงุฌุนุฉ ูุฐุง ุงูุชูุซูู
- ูุญุต ูููุงุช ุงูุณุฌูุงุช
- ุงุณุชุฎุฏุงู ุงูุฎูุงุฑ `--verbose` ููุชูุงุตูู
- ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุธุงู

### ุงูุฅุจูุงุบ ุนู ุงููุดุงูู
ุนูุฏ ุงูุฅุจูุงุบ ุนู ูุดููุฉุ ูุฑุฌู ุชุถููู:
- ุฅุตุฏุงุฑ PHP ู Laravel
- ุฑุณุงูุฉ ุงูุฎุทุฃ ูุงููุฉ
- ุฎุทูุงุช ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงููุดููุฉ
- ููู ุงูุณุฌู ุฐู ุงูุตูุฉ

## ุงูุชุฑุฎูุต

ูุฐู ุงูุฃุฏุงุฉ ูุฑุฎุตุฉ ุชุญุช ุฑุฎุตุฉ MIT. ููููู ุงุณุชุฎุฏุงููุง ูุชุนุฏูููุง ุจุญุฑูุฉ.

---

**ููุงุญุธุฉ**: ูุฐู ุงูุฃุฏุงุฉ ูุตููุฉ ุฎุตูุตุงู ููุนูู ูุน ูููุงุช `.bok` ูู ุงูููุชุจุฉ ุงูุดุงููุฉ ููุฏ ุชุญุชุงุฌ ูุชุนุฏููุงุช ููุนูู ูุน ูุตุงุฏุฑ ุฃุฎุฑู.