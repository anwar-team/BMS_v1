# بنية نظام إدارة المكتبة (Library Management System)

## مقدمة
هذا النظام مصمم لإدارة مكتبة علمية أو موسوعية تحتوي على كتب متعددة، كل كتاب يمكن أن يتكون من عدة مجلدات، وكل مجلد يحتوي على عدة فصول، وكل فصل يمكن أن يحتوي على صفحات. النظام يدعم المؤلفين، الناشرين، التصنيفات، والخصائص الفيزيائية والرقمية للكتب، مع واجهة إدارة متقدمة باستخدام Filament.

---

## الكيانات الرئيسية والعلاقات

### 1. Book (الكتاب)
- يمثل كتاباً واحداً في النظام.
- الحقول الأساسية: العنوان، الوصف، الرابط الثابت (slug)، رقم ISBN، سنة النشر (هجري/ميلادي)، الناشر، القسم، صورة الغلاف، الرؤية (عام/خاص)، الحالة (مسودة/منشور/مؤرشف).
- العلاقات:
  - ينتمي إلى قسم (BookSection)
  - ينتمي إلى ناشر (Publisher)
  - له عدة مؤلفين (AuthorBooks)
  - له عدة مجلدات (Volumes)
  - له عدة صفحات (Pages)

### 2. Volume (المجلد)
- يمثل جزءاً من كتاب (مثلاً: الجزء الأول).
- الحقول: رقم المجلد، العنوان، الوصف.
- العلاقات:
  - ينتمي إلى كتاب (Book)
  - يحتوي على عدة فصول (Chapters)

### 3. Chapter (الفصل)
- يمثل فصلاً داخل مجلد.
- الحقول: رقم الفصل، العنوان، ملخص.
- العلاقات:
  - ينتمي إلى مجلد (Volume)
  - ينتمي إلى كتاب (Book) (للتسهيل)
  - يمكن أن يحتوي على صفحات (حسب التصميم)

### 4. Page (الصفحة)
- تمثل صفحة نصية أو محتوى داخل كتاب.
- الحقول: رقم الصفحة، العنوان، المحتوى، صورة، ملاحظات، حالة النشر.
- العلاقات:
  - تنتمي إلى كتاب (Book)
  - تنتمي إلى مجلد (Volume)
  - تنتمي إلى فصل (Chapter)

### 5. Author (المؤلف)
- يمثل شخصاً ساهم في تأليف أو مراجعة الكتاب.
- الحقول: الاسم الأول، اسم الأب، الاسم الأخير، الجنسية، المذهب، السيرة الذاتية، سنة الميلاد/الوفاة (هجري/ميلادي)، هل على قيد الحياة.
- العلاقات:
  - يرتبط بالكتب عبر AuthorBooks (pivot table مع الدور: مؤلف، محرر، ...)

### 6. Publisher (الناشر)
- يمثل جهة النشر.
- الحقول: الاسم، البلد، البريد الإلكتروني، الهاتف، الموقع الإلكتروني، وصف، حالة التفعيل.

### 7. BookSection (القسم)
- لتصنيف الكتب (مثلاً: علوم شرعية، أدب ...)
- الحقول: الاسم، الوصف، القسم الرئيسي (للدعم الهرمي)، ترتيب العرض، حالة التفعيل، الرابط الثابت.

---

## منطق واجهة الإدارة (Filament)

- **النموذج الرئيسي للكتاب** مقسم إلى Tabs:
  1. معلومات الكتاب الأساسية
  2. التصنيفات والمؤلفين
  3. المجلدات والفصول (Repeater متداخل)
  4. الصفحات (تظهر فقط بعد حفظ الكتاب)

- **Repeater المجلدات**: داخل كل مجلد يوجد Repeater للفصول.
- **Repeater الصفحات**: في تبويب منفصل، مع اختيار المجلد والفصل لكل صفحة.
- **التحقق من صحة البيانات**: معظم الحقول عليها قواعد تحقق (required, unique, ...).
- **حساب عدد الصفحات والمجلدات تلقائياً**: لا يدخلها المستخدم بل تُحسب تلقائياً.
- **إدارة المؤلفين**: لكل كتاب عدة مؤلفين مع تحديد الدور وترتيب العرض.
- **رسالة ودية**: عند محاولة إضافة صفحات قبل حفظ الكتاب تظهر رسالة تنبيه.

---

## ملخص العلاقات (ERD مبسط)

- Book 1---* Volume 1---* Chapter
- Book 1---* Page
- Volume 1---* Chapter
- Chapter 1---* Page (عبر الربط)
- Book *---* Author (عبر AuthorBooks مع الدور)
- Book *---1 Publisher
- Book *---1 BookSection

---

## ملاحظات تصميمية
- النظام مرن جداً ويدعم الكتب الكبيرة والموسوعات.
- يمكن تطويره ليشمل أنواع محتوى أخرى (ملاحق، صور، إلخ).
- قابل للتوسعة مستقبلاً (مثلاً: دعم المراجعات، الإعارات، إلخ).

---

## مثال طلب إلى AI لبناء نفس النظام

"أريد نظام إدارة مكتبة علمية يحتوي على:
- كتب، كل كتاب له عدة مجلدات، كل مجلد له عدة فصول، كل فصل يمكن أن يحتوي على صفحات.
- لكل كتاب مؤلفون متعددون مع تحديد الدور (مؤلف، محرر، ...).
- دعم الناشرين والتصنيفات.
- واجهة إدارة متقدمة (يفضل Filament) مع Tabs لكل مرحلة إدخال.
- لا يمكن إضافة صفحات إلا بعد حفظ الكتاب.
- عدد الصفحات والمجلدات يُحسب تلقائياً.
- كل صفحة مرتبطة بمجلد وفصل وكتاب.
- دعم الحقول العربية بالكامل."

---

## نهاية الملف
